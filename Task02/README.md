# Лабораторная работа 2. ETL в SQLite (movies_rating.db)

## Требования к окружению

- Установленный Python 3.8+ (доступна команда `python3` или `python`)
- Установленный SQLite 3 (доступна команда `sqlite3`)
- Права на выполнение файлов в Git (для Linux потребуется установить флаг +x)

## Быстрый старт

1. Сгенерировать SQL-скрипт и загрузить данные в БД:
   - Linux/macOS:
     - Сделать скрипт исполняемым в git (однократно):
       `git update-index --chmod=+x db_init.bat`
     - Запустить: `./db_init.bat`
   - Windows (PowerShell/CMD):
     - Запустить: `python make_db_init.py`
     - Затем загрузить SQL в базу: `sqlite3 movies_rating.db < db_init.sql`

В результате будут созданы файлы: `db_init.sql` и база `movies_rating.db`.

## Что делает утилита

Скрипт `make_db_init.py`:
- читает входные файлы `movies.csv`, `ratings.csv`, `tags.csv`, `users.txt` из каталога `Task02`;
- генерирует `db_init.sql`, который:
  - удаляет таблицы, если они уже существуют;
  - создает таблицы `movies`, `ratings`, `tags`, `users` с нужными типами;
  - добавляет данные с помощью `INSERT INTO`;
- скрипт-обёртка `db_init.bat` запускает генерацию и затем выполняет загрузку SQL в `movies_rating.db`.

## Структура файлов данных

## Основные файлы данных

### movies.csv
Файл содержит информацию о фильмах в формате CSV.
- **movieId** - уникальный идентификатор фильма
- **title** - название фильма с годом выпуска
- **genres** - жанры фильма, разделенные символом "|"

### ratings.csv
Файл содержит рейтинги фильмов от пользователей в формате CSV.
- **userId** - идентификатор пользователя
- **movieId** - идентификатор фильма
- **rating** - оценка фильма (числовое значение)
- **timestamp** - временная метка оценки

### tags.csv
Файл содержит теги, которые пользователи присвоили фильмам в формате CSV.
- **userId** - идентификатор пользователя
- **movieId** - идентификатор фильма
- **tag** - текстовый тег
- **timestamp** - временная метка создания тега

### users.txt
Файл содержит информацию о пользователях в формате разделенном символом "|".
- **userId** - уникальный идентификатор пользователя
- **name** - имя пользователя
- **email** - электронная почта
- **gender** - пол (male/female)
- **birth_date** - дата рождения
- **occupation** - профессия

## Справочные файлы

### genres.txt
Список всех доступных жанров фильмов (по одному на строку).

### occupation.txt
Список всех доступных профессий пользователей (по одной на строку).

### ratings_count.txt
Файл с информацией о количестве рейтингов.

### sqlite.txt
Файл с информацией о SQLite.
